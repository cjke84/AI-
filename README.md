BTC/USDT 交易机器人

这是一个基于深度学习和多种技术指标的自动化交易系统，专门用于在 OKX 交易所上交易 BTC/USDT 永续合约。
根据布欧的量化日记的修改 原地址https://github.com/huojichuanqi/ds 在原版基础上优化了代码 并添加了一些新功能

## 功能特性

### 1. 智能交易决策
- 使用 DeepSeek AI 大模型分析市场趋势
- 结合多种技术指标（SMA、EMA、RSI、MACD、布林带等）
- 融合市场情绪数据进行综合判断
- 支持 BUY、SELL、HOLD 三种交易信号

### 2. 动态仓位管理
- 根据信号信心度调整仓位大小
- 考虑趋势强度、RSI 状态、波动率和成交量等因素
- 支持连续同向交易的仓位衰减机制
- 风险管理：限制最大仓位比例

### 3. 高级风险管理
- 自动设置止损和止盈价格
- 支持 HOLD 信号减仓功能
- 全仓模式强制执行
- 单向持仓模式设置

### 4. 实时监控和日志
- 详细的交易日志记录
- 持仓状态实时跟踪
- 交易信号统计分析
- 错误处理和重试机制

## 配置说明

所有配置项都位于 [config.json](file://E:\K\桌面\dsox\dsox2\config.json) 文件中，请参考 [CONFIGURATION.md](file://E:\K\桌面\dsox\dsox2\CONFIGURATION.md) 了解详细配置说明。

## 安装和运行

### 环境要求
- Python 3.7+
- 相关依赖包（见 requirements.txt）

### 安装步骤
1. 克隆或下载项目代码
2. 安装依赖包：
   ```
   pip install -r requirements.txt
   ```
3. 配置环境变量：
   - `DEEPSEEK_API_KEY`: DeepSeek API 密钥
   - `OKX_API_KEY`: OKX API 密钥
   - `OKX_SECRET`: OKX API 密钥密文
   - `OKX_PASSWORD`: OKX 交易密码

4. 根据需要修改 [config.json](file://E:\K\桌面\dsox\dsox2\config.json) 配置文件

### 运行程序
```
python dsox2.py
```

## 策略逻辑

### 技术分析维度
1. **趋势分析**（权重40%）
   - 多时间框架趋势一致性（5/20/50周期均线）
   - MACD趋势确认
   - 价格与关键支撑阻力位关系

2. **技术信号确认**（权重35%）
   - RSI超买超卖状态
   - 布林带位置和收缩扩张状态
   - 成交量与价格变化的匹配度

3. **市场情绪**（权重15%）
   - 情绪与技术面的一致性
   - 情绪极端值的参考意义

4. **持仓风险管理**（权重10%）
   - 当前持仓盈亏状况
   - 止损和止盈位置合理性

### 交易决策原则

#### 信号生成规则
- **BUY信号**: 明确的上涨趋势确认，多个指标共振
- **SELL信号**: 明确的下跌趋势确认，多个指标共振
- **HOLD信号**: 趋势不明确或震荡市，避免无谓交易

#### 风险控制原则
1. **趋势优先**: 趋势确认后立即行动，避免过度等待完美信号
2. **避免频繁交易**: 同一方向信号可适当加仓，反向信号需严格确认
3. **仓位管理**: 根据信号信心度调整仓位（LOW:50%, MEDIUM:75%, HIGH:100%）

## 仓位管理

系统支持两种仓位管理模式：

1. **智能仓位管理**（默认启用）
   - 根据市场条件动态计算仓位大小
   - 考虑账户余额、信心度、趋势强度等多个因素

2. **固定仓位管理**
   - 使用固定的合约张数进行交易
   - 在配置文件中设置固定仓位大小

## 日志说明

程序会生成详细的日志信息，包括：
- 程序启动和配置信息
- 市场数据分析过程
- 交易信号生成过程
- 仓位计算和交易执行过程
- 错误和异常信息

日志同时输出到控制台和 `trading_bot.log` 文件中。

## 注意事项

1. 请确保 OKX 账户有足够的保证金进行交易
2. 建议在实盘交易前充分测试策略
3. 密切关注市场变化和程序运行状态
4. 程序会自动设置为全仓模式，请确保了解其风险
5. 交易涉及风险，请根据自身风险承受能力谨慎操作

## 故障排除

如果遇到问题，请检查：
1. API 密钥是否正确配置
2. 网络连接是否正常
3. OKX 账户状态是否正常
4. 配置文件是否正确
5. 查看日志文件了解详细错误信息
